{% extends 'base.html' %}
{% load static %}
{% block title %}Choose Your Plan - Starlex WiFi{% endblock %}
{% block nav %}
  <li><a href="{% url 'portal:landing' %}" class="nav-link active">Home</a></li>
  <li><a href="#" class="nav-link">About</a></li>
  <li><a href="#" class="nav-link">Contact</a></li>
{% endblock %}
{% block content %}
<div class="text-center mb-8">
  <h1 class="text-4xl font-bold mb-4 gradient-text">
    Welcome to Starlex WiFi
  </h1>
  <p class="text-muted mb-6">Choose your plan and get connected instantly</p>
  <div class="text-sm text-muted mb-8">
    <p>You're in a captive portal. Only essential services are available until you subscribe.</p>
    <a href="#" class="text-primary hover:text-secondary">Need help?</a>
  </div>
</div>

<form method="post" action="{% url 'portal:choose_plan' %}" id="plan-form">
  {% csrf_token %}
  <input type="hidden" name="mac" value="{{ mac|default:'unknown' }}">
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    {% for plan in plans %}
    <div class="plan-card card cursor-pointer focus-ring" data-plan-id="{{ plan.id }}" tabindex="0" role="button" aria-label="Select {{ plan.name }}">
      <div class="text-center">
        <div class="text-2xl font-bold mb-2">{{ plan.price }} KES</div>
        <div class="text-lg font-semibold mb-1">{{ plan.name }}</div>
        <div class="text-muted text-sm mb-4">{{ plan.duration_minutes }} minutes unlimited</div>
        <div class="badge badge-primary mb-4">Unlimited Access</div>
        <button type="button" class="btn btn-primary btn-full select-plan-btn" data-plan-id="{{ plan.id }}">
          Subscribe
        </button>
      </div>
    </div>
    {% endfor %}
  </div>
  <button type="submit" id="submit-btn" class="btn btn-primary hidden" disabled>
    Continue to Payment
  </button>
</form>

<div id="selection-prompt" class="text-center text-muted">
  <p>Please select a plan to continue</p>
</div>
{% endblock %}
