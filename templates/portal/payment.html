{% extends 'base.html' %}
{% load static %}
{% block title %}Payment - Starlex WiFi{% endblock %}
{% block nav %}
  <li><a href="{% url 'portal:landing' %}" class="nav-link">Home</a></li>
  <li><a href="#" class="nav-link active">Payment</a></li>
  <li><a href="#" class="nav-link">Support</a></li>
  <li><a href="#" class="nav-link">Help</a></li>
{% endblock %}
{% block content %}
<div class="content-wrapper">
  <div class="w-full max-w-md">
    <div class="card mb-6">
      <h2 class="text-2xl font-bold mb-6 text-center">Complete Your Payment</h2>

      <div class="card mb-6">
        <h3 class="text-lg font-semibold mb-2">{{ plan.name }}</h3>
        <p class="text-muted">{{ plan.duration_minutes }} minutes unlimited access</p>
        <p class="text-2xl font-bold text-primary">KES {{ plan.price }}</p>
      </div>

      <form id="payment-form" method="post" action="">
        {% csrf_token %}
        <input type="hidden" name="plan_id" value="{{ plan.id }}">
        <input type="hidden" name="mac" value="{{ mac }}">

      <div class="form-group">
        <label for="phone" class="form-label">Phone Number (M-Pesa)</label>
        <input type="tel" id="phone" name="phone" class="form-input" placeholder="2547XXXXXXXX" required pattern="254[0-9]{9}">
        <p id="phone-error" class="form-error hidden">Please enter a valid Kenyan phone number (254XXXXXXXXX)</p>
        <p class="form-help">We'll send a payment prompt to this number</p>
      </div>

      <button type="submit" id="pay-btn" class="btn btn-primary btn-full mb-4">
        Pay with M-Pesa
      </button>
    </form>
  </div>
</div>
{% endblock %}
